package desafio.ubot.avaliafilmes.controller;import desafio.ubot.avaliafilmes.model.document.AutoIncremente;import desafio.ubot.avaliafilmes.model.document.Filme;import desafio.ubot.avaliafilmes.model.repository.AutoIncrementeRepository;import desafio.ubot.avaliafilmes.model.repository.FilmeRepository;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import reactor.core.publisher.Mono;@Servicepublic class AutoIncrementeService {    @Autowired    AutoIncrementeRepository autoIncrementeRepository;    public Mono<AutoIncremente> autoIncremente(String nome) {        return autoIncrementeRepository.findByNome(nome)                .switchIfEmpty(                        autoIncrementeRepository.save(AutoIncremente.builder().nome(nome).valor(1).build())                ).flatMap(autoIncremente -> {                    autoIncremente.setValor(autoIncremente.getValor() + 1);                    return autoIncrementeRepository.save(autoIncremente);                });    }}